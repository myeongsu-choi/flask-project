-- 데이터베이스 생성
CREATE DATABASE IF NOT EXISTS academic_records;
USE academic_records;

-- 사용자 테이블 생성
CREATE TABLE users (
    id VARCHAR(10) PRIMARY KEY,
    role ENUM('student', 'professor', 'admin') NOT NULL,
    name VARCHAR(50) NOT NULL,
    department VARCHAR(50),
    admission_year INT NOT NULL,
    password_hash VARCHAR(255) NOT NULL
);

-- 과목 테이블 생성
CREATE TABLE subjects (
    code VARCHAR(10) PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    credits INT NOT NULL,
    professor_id VARCHAR(10),
    FOREIGN KEY (professor_id) REFERENCES users(id)
);

-- 성적 테이블 생성
CREATE TABLE grades (
    id INT AUTO_INCREMENT PRIMARY KEY,
    student_id VARCHAR(10),
    subject_code VARCHAR(10),
    semester VARCHAR(6),
    score FLOAT,
    grade CHAR(2),
    FOREIGN KEY (student_id) REFERENCES users(id),
    FOREIGN KEY (subject_code) REFERENCES subjects(code)
);

-- 사용자 데이터 삽입 (비밀번호는 전부 1234로 설정, SHA-256 해싱)
INSERT INTO users (id, role, name, department, admission_year, password_hash) VALUES
('2020001', 'student', '김학생', '컴퓨터공학과', 2020, SHA2('1234', 256)),
('2020002', 'student', '이학생', '전자공학과', 2020, SHA2('1234', 256)),
('2019001', 'student', '박학생', '경영학과', 2019, SHA2('1234', 256)),
('2021001', 'student', '정학생', '나노신소재공학과', 2021, SHA2('1234', 256)),
('2018001', 'student', '최학생', '기계공학과', 2018, SHA2('1234', 256)),
('2022001', 'student', '강학생', '소프트웨어학과', 2022, SHA2('1234', 256)),
('2021002', 'student', '윤학생', '창의소프트학부', 2021, SHA2('1234', 256)),
('2019002', 'student', '임학생', '물리천문학과', 2019, SHA2('1234', 256)),
('2020003', 'student', '한학생', '수학통계학과', 2020, SHA2('1234', 256)),
('2022002', 'student', '송학생', '생명시스템학부', 2022, SHA2('1234', 256)),
('P001', 'professor', '박교수', '컴퓨터공학과', 2010, SHA2('1234', 256)),
('P002', 'professor', '김교수', '전자공학과', 2005, SHA2('1234', 256)),
('P003', 'professor', '이교수', '경영학과', 2015, SHA2('1234', 256)),
('A001', 'admin', '서관리', NULL, 2016, SHA2('1234', 256));

-- 과목 데이터 삽입
INSERT INTO subjects (code, name, credits, professor_id) VALUES
('COMP101', 'C프로그래밍', 4, 'P001'),
('COMP201', '자료구조', 4, 'P001'),
('COMP301', '웹기반시스템', 3, 'P001'),
('ELEC101', '전자회로', 3, 'P002'),
('ELEC201', '디지털시스템', 3, 'P002'),
('MGMT101', '창업과기업가정신', 1, 'P003'),
('MGMT201', '관리경제학', 3, 'P003'),
('CHEM101', '일반화학', 3, 'P001'),
('MECH101', '기계요소설계', 3, 'P002'),
('SOFT101', '소프트웨어공학', 3, 'P001'),
('MATH101', '미적분학', 3, 'P001'),
('PHYS101', '일반물리학', 3, 'P002'),
('BIOL101', '일반생물학', 3, 'P003'),
('ECON101', '경제학원론', 3, 'P003'),
('STAT101', '해석학개론', 3, 'P001'),
('LANG101', 'English Writing', 2, 'P002'),
('HIST101', '세계사', 3, 'P003'),
('PHIL101', '서양철학', 3, 'P001'),
('PSYC101', '미술심리치료', 3, 'P002'),
('ART101', '현대예술의이해', 2, 'P003'),
('COMP102', '문제해결및실습JAVA', 3, 'P001'),
('COMP202', '데이터베이스', 3, 'P001'),
('COMP302', 'Capstone디자인', 6, 'P001'),
('ELEC102', '반도체소자공학', 3, 'P002'),
('ELEC202', '통신이론', 3, 'P002'),
('MGMT102', '재무통섭론', 3, 'P003'),
('MGMT202', '회계통제시스템', 3, 'P003'),
('CHEM102', '유기화학', 3, 'P001'),
('MECH102', '전산열유체역학', 3, 'P002'),
('SOFT102', '운영체제', 3, 'P001');

-- 성적 데이터 삽입
INSERT INTO grades (student_id, subject_code, semester, score, grade) VALUES
-- 김학생의 성적
('2020001', 'COMP101', '2020-1', 4.0, 'A'),
('2020001', 'ELEC101', '2020-1', 3.5, 'B+'),
('2020001', 'COMP201', '2020-2', 4.5, 'A+'),
('2020001', 'MGMT101', '2020-2', 3.0, 'B'),
('2020001', 'COMP301', '2021-1', 4.0, 'A'),
('2020001', 'ELEC201', '2021-1', 3.5, 'B+'),
('2020001', 'CHEM101', '2021-2', 3.0, 'B'),
('2020001', 'MECH101', '2021-2', 4.0, 'A'),
('2020001', 'SOFT101', '2022-1', 4.5, 'A+'),
('2020001', 'MGMT201', '2022-1', 3.5, 'B+'),
('2020001', 'MATH101', '2022-2', 3.5, 'B+'),
('2020001', 'PHYS101', '2022-2', 4.0, 'A'),
('2020001', 'COMP102', '2023-1', 4.5, 'A+'),
('2020001', 'STAT101', '2023-1', 3.5, 'B+'),
('2020001', 'COMP202', '2023-2', 4.0, 'A'),

-- 이학생의 성적
('2020002', 'ELEC101', '2020-1', 4.5, 'A+'),
('2020002', 'COMP101', '2020-1', 3.5, 'B+'),
('2020002', 'ELEC201', '2020-2', 4.0, 'A'),
('2020002', 'COMP201', '2020-2', 3.0, 'B'),
('2020002', 'MECH101', '2021-1', 3.5, 'B+'),
('2020002', 'MGMT101', '2021-1', 3.0, 'B'),
('2020002', 'CHEM101', '2021-2', 4.0, 'A'),
('2020002', 'COMP301', '2021-2', 3.5, 'B+'),
('2020002', 'SOFT101', '2022-1', 4.0, 'A'),
('2020002', 'MGMT201', '2022-1', 3.0, 'B'),
('2020002', 'BIOL101', '2022-2', 3.5, 'B+'),
('2020002', 'ECON101', '2022-2', 4.0, 'A'),
('2020002', 'ELEC102', '2023-1', 4.5, 'A+'),
('2020002', 'LANG101', '2023-1', 3.5, 'B+'),
('2020002', 'ELEC202', '2023-2', 4.0, 'A'),

-- 박학생의 성적
('2019001', 'MGMT101', '2019-1', 4.5, 'A+'),
('2019001', 'COMP101', '2019-1', 3.0, 'B'),
('2019001', 'MGMT201', '2019-2', 4.0, 'A'),
('2019001', 'ELEC101', '2019-2', 3.5, 'B+'),
('2019001', 'COMP201', '2020-1', 3.0, 'B'),
('2019001', 'CHEM101', '2020-1', 4.0, 'A'),
('2019001', 'MECH101', '2020-2', 3.5, 'B+'),
('2019001', 'ELEC201', '2020-2', 3.0, 'B'),
('2019001', 'SOFT101', '2021-1', 4.0, 'A'),
('2019001', 'COMP301', '2021-1', 3.5, 'B+'),
('2019001', 'HIST101', '2021-2', 4.0, 'A'),
('2019001', 'PHIL101', '2021-2', 3.5, 'B+'),
('2019001', 'MGMT102', '2022-1', 4.5, 'A+'),
('2019001', 'PSYC101', '2022-1', 4.0, 'A'),
('2019001', 'MGMT202', '2022-2', 3.5, 'B+'),

-- 정학생의 성적
('2021001', 'COMP101', '2021-1', 3.5, 'B+'),
('2021001', 'CHEM101', '2021-1', 4.0, 'A'),
('2021001', 'ELEC101', '2021-2', 3.0, 'B'),
('2021001', 'MGMT101', '2021-2', 4.5, 'A+'),
('2021001', 'COMP201', '2022-1', 3.5, 'B+'),
('2021001', 'MECH101', '2022-1', 4.0, 'A'),
('2021001', 'ELEC201', '2022-2', 3.5, 'B+'),
('2021001', 'SOFT101', '2022-2', 4.0, 'A'),
('2021001', 'COMP301', '2023-1', 3.0, 'B'),
('2021001', 'MGMT201', '2023-1', 4.5, 'A+'),
('2021001', 'ART101', '2023-2', 4.0, 'A'),
('2021001', 'COMP102', '2023-2', 3.5, 'B+'),
('2021001', 'STAT101', '2024-1', 4.0, 'A'),
('2021001', 'BIOL101', '2024-1', 3.5, 'B+'),
('2021001', 'CHEM102', '2024-2', 4.5, 'A+'),

-- 최학생의 성적
('2018001', 'COMP101', '2018-1', 4.0, 'A'),
('2018001', 'ELEC101', '2018-1', 3.5, 'B+'),
('2018001', 'MGMT101', '2018-2', 4.5, 'A+'),
('2018001', 'COMP201', '2018-2', 3.0, 'B'),
('2018001', 'CHEM101', '2019-1', 3.5, 'B+'),
('2018001', 'ELEC201', '2019-1', 4.0, 'A'),
('2018001', 'MECH101', '2019-2', 3.5, 'B+'),
('2018001', 'SOFT101', '2019-2', 4.0, 'A'),
('2018001', 'COMP301', '2020-1', 3.0, 'B'),
('2018001', 'MGMT201', '2020-1', 4.5, 'A+'),
('2018001', 'PHYS101', '2020-2', 3.5, 'B+'),
('2018001', 'MATH101', '2020-2', 4.0, 'A'),
('2018001', 'ECON101', '2021-1', 3.5, 'B+'),
('2018001', 'LANG101', '2021-1', 4.0, 'A'),
('2018001', 'MECH102', '2021-2', 4.5, 'A+'),

-- 강학생의 성적
('2022001', 'COMP101', '2022-1', 4.5, 'A+'),
('2022001', 'ELEC101', '2022-1', 4.0, 'A'),
('2022001', 'MGMT101', '2022-2', 3.5, 'B+'),
('2022001', 'CHEM101', '2022-2', 3.0, 'B'),
('2022001', 'COMP201', '2023-1', 4.0, 'A'),
('2022001', 'ELEC201', '2023-1', 3.5, 'B+'),
('2022001', 'MECH101', '2023-2', 4.0, 'A'),
('2022001', 'SOFT101', '2023-2', 4.5, 'A+'),
('2022001', 'COMP301', '2024-1', 3.5, 'B+'),
('2022001', 'MGMT201', '2024-1', 4.0, 'A'),
('2022001', 'HIST101', '2024-2', 3.5, 'B+'),
('2022001', 'PHIL101', '2024-2', 4.0, 'A'),
('2022001', 'COMP102', '2025-1', 4.5, 'A+'),
('2022001', 'STAT101', '2025-1', 4.0, 'A'),
('2022001', 'SOFT102', '2025-2', 3.5, 'B+'),

-- 윤학생의 성적
('2021002', 'COMP101', '2021-1', 3.0, 'B'),
('2021002', 'ELEC101', '2021-1', 3.5, 'B+'),
('2021002', 'MGMT101', '2021-2', 4.0, 'A'),
('2021002', 'CHEM101', '2021-2', 3.5, 'B+'),
('2021002', 'COMP201', '2022-1', 4.0, 'A'),
('2021002', 'ELEC201', '2022-1', 3.0, 'B'),
('2021002', 'MECH101', '2022-2', 4.5, 'A+'),
('2021002', 'SOFT101', '2022-2', 4.0, 'A'),
('2021002', 'COMP301', '2023-1', 3.5, 'B+'),
('2021002', 'MGMT201', '2023-1', 4.0, 'A'),
('2021002', 'PSYC101', '2023-2', 4.0, 'A'),
('2021002', 'ART101', '2023-2', 3.5, 'B+'),
('2021002', 'COMP202', '2024-1', 4.5, 'A+'),
('2021002', 'BIOL101', '2024-1', 4.0, 'A'),
('2021002', 'COMP302', '2024-2', 3.5, 'B+'),

-- 임학생의 성적
('2019002', 'COMP101', '2019-1', 4.0, 'A'),
('2019002', 'ELEC101', '2019-1', 3.5, 'B+'),
('2019002', 'MGMT101', '2019-2', 4.5, 'A+'),
('2019002', 'CHEM101', '2019-2', 3.0, 'B'),
('2019002', 'COMP201', '2020-1', 4.0, 'A'),
('2019002', 'ELEC201', '2020-1', 3.5, 'B+'),
('2019002', 'MECH101', '2020-2', 3.0, 'B'),
('2019002', 'SOFT101', '2020-2', 4.0, 'A'),
('2019002', 'COMP301', '2021-1', 3.5, 'B+'),
('2019002', 'MGMT201', '2021-1', 4.5, 'A+'),
('2019002', 'PHYS101', '2021-2', 4.0, 'A'),
('2019002', 'MATH101', '2021-2', 3.5, 'B+'),
('2019002', 'ECON101', '2022-1', 4.5, 'A+'),
('2019002', 'LANG101', '2022-1', 4.0, 'A'),
('2019002', 'ELEC102', '2022-2', 3.5, 'B+'),

-- 한학생의 성적
('2020003', 'COMP101', '2020-1', 3.5, 'B+'),
('2020003', 'ELEC101', '2020-1', 4.0, 'A'),
('2020003', 'MGMT101', '2020-2', 3.0, 'B'),
('2020003', 'CHEM101', '2020-2', 4.5, 'A+'),
('2020003', 'COMP201', '2021-1', 3.5, 'B+'),
('2020003', 'ELEC201', '2021-1', 4.0, 'A'),
('2020003', 'MECH101', '2021-2', 3.5, 'B+'),
('2020003', 'SOFT101', '2021-2', 4.0, 'A'),
('2020003', 'COMP301', '2022-1', 3.0, 'B'),
('2020003', 'MGMT201', '2022-1', 4.5, 'A+'),
('2020003', 'HIST101', '2022-2', 4.0, 'A'),
('2020003', 'PHIL101', '2022-2', 3.5, 'B+'),
('2020003', 'COMP102', '2023-1', 4.5, 'A+'),
('2020003', 'STAT101', '2023-1', 4.0, 'A'),
('2020003', 'COMP202', '2023-2', 3.5, 'B+'),

-- 송학생의 성적
('2022002', 'COMP101', '2022-1', 4.0, 'A'),
('2022002', 'ELEC101', '2022-1', 3.5, 'B+'),
('2022002', 'MGMT101', '2022-2', 4.5, 'A+'),
('2022002', 'CHEM101', '2022-2', 4.0, 'A'),
('2022002', 'COMP201', '2023-1', 3.5, 'B+'),
('2022002', 'ELEC201', '2023-1', 4.0, 'A'),
('2022002', 'MECH101', '2023-2', 3.0, 'B'),
('2022002', 'SOFT101', '2023-2', 4.5, 'A+'),
('2022002', 'COMP301', '2024-1', 4.0, 'A'),
('2022002', 'MGMT201', '2024-1', 3.5, 'B+'),
('2022002', 'PSYC101', '2024-2', 4.0, 'A'),
('2022002', 'ART101', '2024-2', 3.5, 'B+'),
('2022002', 'BIOL101', '2025-1', 4.5, 'A+'),
('2022002', 'LANG101', '2025-1', 4.0, 'A'),
('2022002', 'SOFT102', '2025-2', 3.5, 'B+');
